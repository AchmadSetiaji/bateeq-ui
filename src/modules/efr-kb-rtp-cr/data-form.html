<template>
    <form class="form-horizontal">
        <textbox label="Nomor Referensi" value.bind="data.reference" error.bind="error.reference" read-only.bind="readOnly" aria-placeholder="Packing List SPK"></textbox>
        <dropdown label="Sumber Penyimpanan" value.bind="data.source" items.bind="sources"></dropdown>
        <dropdown label="Tujuan Penyimpanan" value.bind="data.destination" items.bind="destinations"></dropdown>
    </form>
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>No.</th>
                <th>
                    <div class="row">
                        <div class="col-md-3"> Produk </div>
                        <div class="col-md-2"> Kuantitas Stok </div>
                        <div class="col-md-2"> Kuantitas Pengiriman </div>
                        <div class="col-md-5"> Catatan </div>
                    </div>
                </th>
                <th><button href="#" class="btn btn-success btn-sm pull-right" click.delegate="addItem()">Tambah</button></th>
            </tr>
        </thead>
        <tbody>
            <tr repeat.for="item of data.items">
                <td>${$index+1}</td>
                <td>
                    <div class="row">
                        <div class="col-md-3"> 
                            <finishedgoods-auto-suggest   label=""     value.bind="item.item"      error.bind="error.items[$index].itemId"     read-only.bind="readOnly"  change.delegate="itemChanged($event, item)" ></finishedgoods-auto-suggest>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group ${error.items[$index].availableQuantity?'has-error':''}">
                                <center><p class="form-control-static">${item.availableQuantity}</p></center>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group ${error.items[$index].quantity?'has-error':''}">
                                <input class="form-control" type="number" name="quantity" value.bind="item.quantity" max.bind="item.availableQuantity" min="0"
                                />
                                <span class="help-block">${error.items[$index].quantity}</span>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="form-group ${error.items[$index].remark?'has-error':''}">
                                <input class="form-control" type="text" name="remark" value.bind="item.remark" />
                                <span class="help-block">${error.items[$index].remark}</span>
                            </div>
                        </div>
                    </div>
                </td>
                <td><button href="#" class="btn btn-danger btn-sm pull-right" click.delegate="removeItem(item)">Hapus</button></td>
            </tr>
        </tbody>
    </table>
    <div class="alert alert-info text-center" role="alert" if.bind="data.items.length == 0">
        Tidak ada data.
    </div>
</template>